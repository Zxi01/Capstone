{% extends 'base.html' %}
{% block content %}
{% load static %}

<div class="masthead">
    <div class="container">
        <div class="row g-0">
            <div class="col-md-6 masthead-text">
                <h1 class="post-title">{{ post.title }}</h1>
                <p class="post-subtitle">{{ post.author }} | {{ post.created_on }}</p>
            </div>
            <div class="d-none d-md-block col-md-6 masthead-image">
                <img src="{% static 'images/offline.jpg' %}" class="scale" alt="placeholder">
            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col card mb-4 mt-3 left top">
            <div class="card-body">
                <div class="review-header mb-3">
                    <h2 class="review-title">{{ post.title }}</h2>
                    <div class="meta-box mb-3 p-3 rounded">
                        <p class="mb-1"><strong>Developer:</strong>
                            {% if extra and extra.developer %}{{ extra.developer }}{% else %}{{ post.author }}{% endif %}
                        </p>
                        {% if extra and extra.release_date %}
                        <p class="mb-0"><strong>Release Date:</strong> {{ extra.release_date }}</p>
                        {% else %}
                        <p class="mb-0"><strong>Release Date:</strong> {{ post.created_on|date:"Y-m-d" }}</p>
                        {% endif %}
                    </div>

                    {% if extra and extra.rating %}
                    <div class="rating-badge mb-3">Rating: {{ extra.rating|floatformat:1 }}</div>
                    {% elif post.rating %}
                    <div class="rating-badge mb-3">Rating: {{ post.rating|floatformat:1 }}</div>
                    {% endif %}
                </div>

                {% comment %} Description / Excerpt / Content sections {% endcomment %}
                {% if extra and extra.content_html %}
                <h5 class="section-title mt-3">| Description</h5>
                <div class="section-body mb-3">{{ extra.content_html|safe }}</div>
                {% elif post.excerpt %}
                <h5 class="section-title mt-3">| Description</h5>
                <div class="section-body mb-3">{{ post.excerpt }}</div>
                {% endif %}

                {% if post.excerpt %}
                <h5 class="section-title">| Excerpt</h5>
                <div class="section-body mb-3">{{ post.excerpt }}</div>
                {% endif %}

                <h5 class="section-title">| Content</h5>
                <div class="section-body mb-4">
                    {% if extra and extra.content_html %}
                    {{ extra.content_html|safe }}
                    {% else %}
                    {{ post.content|safe }}
                    {% endif %}
                </div>

                {% if extra and extra.platforms %}
                <h6 class="mt-3">| Platforms</h6>
                <div class="mb-3">
                    {% for p in extra.platforms %}
                    <span class="review-chip">{{ p }}</span>
                    {% endfor %}
                </div>
                {% endif %}

                {% if extra and extra.genre %}
                <h6>| Genre</h6>
                <div class="mb-3">
                    {% for g in extra.genre %}
                    <span class="review-chip">{{ g }}</span>
                    {% endfor %}
                </div>
                {% endif %}

                {% if extra and extra.tags %}
                <h6>| Tags</h6>
                <div class="mb-3">
                    {% for t in extra.tags %}
                    <span class="review-chip">{{ t }}</span>
                    {% endfor %}
                </div>
                {% endif %}

                <p><small>Updated on: {{ post.updated_on }}</small></p>
            </div>
        </div>
    </div>
</div>

{% endblock content %}
